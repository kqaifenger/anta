<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>注册界面</title>
		<link rel="stylesheet" type="text/css" href="css/reg.css"/>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="iconfont/iconfont.css"/>
	</head>
	<body>
		
	</body>
	<div id="con">
			<div class="top">
				<img src="images/logo.png"/>
			</div>
			
			
			<div id="container">
				<a href="#" class="on">手机号注册</a>
				<a href="#"  style="border-right: solid 1px #FF4400;">邮箱注册</a>
	
				<!--<div class="clear"></div>-->
				
				<div class="content" style="display:block;">
					<p>请输入手机号:</p>
					<input type="text" id="uname"/><br />
					<span id="yz1"></span>
					<p>请输入密码:</p>
					<input type="password" id="upwd"/>
					<span id="yz2"></span>
					<button id="btn">确认</button>
				</div>
				<div class="content">
					<p>请输入邮箱:</p>
					<input type="text" id="uname2"/><br />
					<span id="yz3"></span>
					<p>请输入密码:</p>
					<input type="password" id="upwd2"/>
					<span id="yz4"></span>
					<button id="btn2">确认</button>
				</div>
			</div>
		<!--跳转-->
		<div class="tiaozhuan">
			<a href="log.html">已有账号？点此处去登录</a>
		</div>
		<div class="fixed">
			<a href="javascript:;">
				<div class="zaixian">
					<i class="iconfont icon-yuyin"></i>
					<p>在线客服</p>
				</div>
			</a>
			<a href="javascript:;">
			<div class="dianhua">
				<i class="iconfont icon-shengyin"></i>
				<p>客服电话</p>
				<span class="er">
					<em>400-2124-3213</em>
				</span>
			</div>
			</a>
		</div>
			
			
		</div>
		
</html>
<script src="js/cookie.js"></script>
<script src="js/jquery-1.11.1.min.js"></script>
<script>
	//变色
	$(".dianhua").hover(function(){
		$(this).find(".er").css( {"display":"block"} )
	},function(){
		$(this).find(".er").css( {"display":"none"} )
	})
	//验证
	var btn = document.getElementById("btn");
	var uname = document.getElementById("uname");
	var upwd = document.getElementById("upwd");
	var yz1 = document.getElementById("yz1");
	var yz2 = document.getElementById("yz2");

	//手机号注册验证
	uname.onblur = function(){
		var telVal = uname.value;
		var regtelVal = /^[1][3,4,5,7,8][0-9]{9}$/;
		if( regtelVal.test(telVal) ){
			yz1.innerHTML = "√";
		}else{
			yz1.innerHTML = "手机号必须是以13,14,15,17,18开头的11位有效数字";
		}
	} 
	upwd.onblur = function(){
		var telPwd = upwd.value;
		var regtelPwd = /^\w{6,16}$/;
		if( regtelPwd.test(telPwd) ){
			yz2.innerHTML = "√";
		}else{
			yz2.innerHTML = "密码必须是6-16位的数字字母下划线";
		}
	} 

	//存 手机号cookie
//	btn.onclick = function(){
//		var val1 = uname.value;
//		var val2 = upwd.value;
//		setCookie("uname",val1,3);
//		setCookie("upwd",val2,3);
//		window.location.href = "log.html";
//	}
		//手机号注册成功失败验证
	btn.onclick = function() {
		if(yz1.innerHTML == "√" && yz2.innerHTML == "√") {
			alert("注册成功");
			var val1 = uname.value;
			var val2 = upwd.value;
			setCookie("uname",val1,3);
			setCookie("upwd",val2,3);
			window.location.href = "log.html";
		} else {
			alert("注册失败,请检查您输入的格式");
		}
	}
	
	var btn2 = document.getElementById("btn2");
	var uname2 = document.getElementById("uname2");
	var upwd2 = document.getElementById("upwd2");
	var yz3 = document.getElementById("yz3");
	var yz4 = document.getElementById("yz4");
	
	
	//邮箱注册验证
	uname2.onblur = function(){
		var emailVal = uname2.value;
		var regemailVal = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;
		if( regemailVal.test(emailVal) ){
			yz3.innerHTML = "√";
		}else{
			yz3.innerHTML = "邮箱格式不合法";
		}
	} 
	//邮箱密码验证
	upwd2.onblur = function(){
		var telPwd = upwd2.value;
		var regtelPwd = /^\w{6,16}$/;
		if( regtelPwd.test(telPwd) ){
			yz4.innerHTML = "√";
		}else{
			yz4.innerHTML = "密码必须是6-16位的数字字母下划线";
		}
	} 
	//存 邮箱cookie
//	btn2.onclick = function(){
//		var val3 = uname2.value;
//		var val4 = upwd2.value;
//		setCookie("uname2",val3,3);
//		setCookie("upwd2",val4,3);
//		window.location.href = "log.html";
//	}
		
	//注册成功失败验证
	btn2.onclick = function() {
		if(yz3.innerHTML == "√" && yz4.innerHTML == "√") {
			alert("注册成功");
			var val3 = uname2.value;
			var val4 = upwd2.value;
			setCookie("uname2",val3,3);
			setCookie("upwd2",val4,3);
			window.location.href = "log.html";
		} else {
			alert("注册失败,请检查您输入的格式");
		}
	}

	
	//选项卡注册
	var container =  document.querySelector("#container");
	var list = container.getElementsByTagName("a");
	var oDivs = container.getElementsByClassName("content");
	for(var i = 0; i < list.length; i++){
		list[i].myIndex = i; //在每个a标签加个自定义属性，保存自己的下标
		list[i].onclick = function(){
			for(var j = 0; j < list.length; j++){
				list[j].className = "";
				oDivs[j].style.display = "none";
			}
			this.className = "on";
//			console.log(this.myIndex)
			//console.log(this)
			oDivs[this.myIndex].style.display = "block";
		}
	}
</script>
